<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Contacts - Warehouse Mini CRM</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header>
        <h1>Contacts</h1>
        <nav>
            <button onclick="location.href='/'">Home</button>
            <button onclick="location.href='/orders'">Orders</button>
            <button onclick="location.href='/inventory'">Inventory</button>
        </nav>
    </header>
    <main>
        <h2>Contact List</h2>
        <div id="contacts-table">
            <!-- Contacts will be loaded here by JavaScript -->
        </div>
    </main>
    <footer>
        <span id="status">Not connected</span>
    </footer>
    <script>
        fetch('/api/contacts')
            .then(response => response.json())
            .then(data => {
                let html = '<table><tr>';
                if (data.length > 0) {
                    Object.keys(data[0]).forEach(key => {
                        html += `<th>${key}</th>`;
                    });
                    html += '</tr>';
                    data.forEach(contact => {
                        html += '<tr>';
                        Object.values(contact).forEach(val => {
                            html += `<td>${val}</td>`;
                        });
                        html += '</tr>';
                    });
                } else {
                    html += '<td>No contacts found.</td></tr>';
                }
                html += '</table>';
                document.getElementById('contacts-table').innerHTML = html;
            })
            .catch(() => {
                document.getElementById('contacts-table').innerHTML = '<p>Could not load contacts.</p>';
            });
    </script>
</body>
</html>